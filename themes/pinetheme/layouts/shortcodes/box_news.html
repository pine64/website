<div class='box {{ if .Get "style" }}{{ .Get "style" }}{{ end }}'>
    <div class="box">
        <h2>{{ .Get "title" }}</h2>
    </div>

    <div class="box gap cols">
        {{ $type := .Get "type" }}
        
        {{ range ( where .Site.RegularPages "Type" $type | first (.Get "amount") ) }}
            <div class="box f50 themeblogpreview l400 index_news">
                <a href="{{ .RelPermalink }}" aria-label="A news box linking to a blog post">
                    {{ $page := . }}
                    {{ with index .Params.images 0 }}
                        <img src="{{ . }}" alt="Cover image of the post {{ $page.Title }}">
                    {{ end }}

                    <div class="pad_s">
                        <h2>{{ .Title }}</h2>
                        <p>{{ .Summary | plainify }}</p>
                        
                        <br>
                        <div>
                          <strong>Read the full news</strong>
                        </div>
                    </div>
                </a>
            </div>
        {{end}}
    </div>

    <div class="box pad">
        <a href="/{{$type}}/"><div class="roundedbutton center">View all</div></a>
    </div>

</div>